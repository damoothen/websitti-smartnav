!function(a){a.fn.smartnav=function(b){var c={duration:1e3,updateHistory:!0};return b=a.extend({},c,b),this.each(function(c){var d=a(this),e=a("a",d),f=a(window),g=[],h=null,i=null,j=function(a){b.updateHistory&&(history.pushState?history.pushState(null,null,a):location.hash=a)};e.each(function(b,c){var d=a(this).attr("href");"#"===d.charAt(0)&&d.length>1&&g.push(d)}),f.scroll(function(b){var c=f.scrollTop(),k=null;for(var l in g)k=a(g[l]),c>k.offset().top-f.height()/2&&(i=g[l]);h!==i&&(h=i,e.removeClass("selected"),a("a[href="+h+"]",d).addClass("selected"),j(h))}),e.click(function(c){c.preventDefault();var d=0;return h=a(this).attr("href"),h&&"#"===h.charAt(0)?("#"!==h&&(d=a(h).offset().top),a("html,body").animate({scrollTop:d},b.duration),void j(h)):!1})})}}(jQuery);