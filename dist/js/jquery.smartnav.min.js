!function(a){a.fn.smartnav=function(b){var c={linksSelector:"a",duration:1e3,updateHistory:!0,selectClass:"selected"};return b=a.extend({},c,b),this.each(function(c){var d=a(this),e=a(b.linksSelector,d),f=a(window),g=a(document),h=[],i=null,j=null,k=function(a){b.updateHistory&&(history.pushState?history.pushState(null,null,a):location.hash=a)};e.each(function(b,c){var d=a(this).attr("href");"#"===d.charAt(0)&&d.length>1&&h.push(d)}),f.scroll(function(c){var l=f.scrollTop(),m=null;if(0===l)m=a(h[0]),0===m.offset().top&&(j=h[0]);else if(l+f.height()>=g.height())m=a(h[h.length-1]),m.offset().top+m.outerHeight()>=g.height()&&(j=h[h.length-1]);else for(var n in h)m=a(h[n]),l>m.offset().top-f.height()/2&&(j=h[n]);i!==j&&(i=j,e.removeClass(b.selectClass),a("a[href="+i+"]",d).addClass(b.selectClass),k(i))}),e.click(function(c){c.preventDefault();var d=0;return i=a(this).attr("href"),i&&"#"===i.charAt(0)?("#"!==i&&(d=a(i).offset().top),a("html,body").animate({scrollTop:d},b.duration),void k(i)):!1})})}}(jQuery);